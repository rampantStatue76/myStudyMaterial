## 基本概念
Vuex 是 Vue 全局状态管理库，用来在多个组件之间共享状态。
它类似一个集中式存储（Store），把所有组件的共享数据放在一个地方统一管理。
Vuex 通过 state、mutations、actions、getters、modules 五个核心概念来实现数据的有序流动。通常我们会在 Vue 组件中通过 this.$store.state 读取状态（在vue3中使用const store = useStore() 之后使用store.state、store.getter、store.action、store.mutations），通过 commit 或 dispatch 修改状态，保证数据的可维护性与可追踪性。

## vuex有哪些属性
- state：全局共享属性
    通过this.$store.state.value去读取和修改
    通过mapState去访问（不能修改）
- mutations: 同步修改
- getters: 针对state数据进行二次计算
    通过this.$store.getters.changeState只能访问不能修改
- modules：再次细分store的模块，在不同模块中存储不同的功能数据
- actions: 存放全局方法，存放异步任务<mutations是用来修改state的值的，而actions是用来提交mutations的>
- mutations：存放全局方法，存放同步任务

## vuex的持久化存储
vuex本身不是持久化存储的。
需要自己去下载插件来自己配置plugin或者自己去存到localStorage中

```vue
import { createStore } from 'vuex'

const store = createStore({
  // --- 状态（state） ---
  state() {
    return {
      count: 0,
      user: { name: '秦晴', age: 20 }
    }
  },

  // --- 同步修改（mutations） ---
  mutations: {
    increment(state) {
      state.count++
    },
    decrement(state) {
      state.count--
    },
    updateUser(state, payload) {
      state.user = { ...state.user, ...payload }
    }
  },

  // --- 异步操作（actions） ---
  actions: {
    asyncIncrement({ commit }) {
      setTimeout(() => {
        commit('increment')
      }, 1000)
    },
    asyncUpdateUser({ commit }, payload) {
      return new Promise(resolve => {
        setTimeout(() => {
          commit('updateUser', payload)
          resolve()
        }, 1000)
      })
    }
  },

  // --- 派生属性（getters） ---
  getters: {
    doubleCount(state) {
      return state.count * 2
    },
    userInfo(state) {
      return `${state.user.name} (${state.user.age})`
    }
  }
})

// --- 订阅状态变化（subscribe） ---
store.subscribe((mutation, state) => {
  console.log('🔔 Mutation 触发:', mutation.type)
  console.log('📦 当前 state:', state)
})

// --- replaceState: 替换整个状态 ---
store.replaceState({
  count: 10,
  user: { name: '初始化用户', age: 99 }
})

export default store
```

```vue
<template>
  <div class="app">
    <h1>Vue 3 + Vuex 4 完整功能示例</h1>

    <p>count：{{ count }}</p>
    <p>doubleCount（getter）：{{ doubleCount }}</p>
    <p>用户信息：{{ userInfo }}</p>

    <button @click="increment">+1</button>
    <button @click="decrement">-1</button>
    <button @click="asyncAdd">异步 +1</button>
    <button @click="updateUserInfo">异步修改用户</button>
  </div>
</template>

```
<script setup>
import { computed } from 'vue'
import { useStore } from 'vuex'

const store = useStore()

// --- state ---
const count = computed(() => store.state.count)

// --- getters ---
const doubleCount = computed(() => store.getters.doubleCount)
const userInfo = computed(() => store.getters.userInfo)

// --- mutations ---
const increment = () => store.commit('increment')
const decrement = () => store.commit('decrement')

// --- actions ---
const asyncAdd = () => store.dispatch('asyncIncrement')
const updateUserInfo = async () => {
  await store.dispatch('asyncUpdateUser', { name: '小李', age: 25 })
}
</script>
```