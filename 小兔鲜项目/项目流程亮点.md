### 业务流程
- 点击登录后，表单检验成功，调用userStore.getUserInfo()方法<在这个方法中调用登录接口，获得用户信息userInfo（包括token）后一并存在userStore中，并在axios中设置请求拦截器用于拦截请求以加上userStore.userInfo.token令牌>
- 登录的同时检查一下cartStore.cartList.length是否为0，不为零就调用一下合并购物车接口，把未登录时候的购物车操作合并到登录时候的购物车中



## 项目亮点
### 优化重复请求
两个导航中的菜单列表数据是完全一样的，（大组件中有两个组件，一个固定显示，一个下滑到一定距离才显示）。两次网络请求太浪费，所以通过pinia集中管理请求菜单列表数据并保存列表数据，在进入大组件后就调用，两个小组件获取列表数据时直接从pinia中获取。

### 图片懒加载
使用app.directive()注册全局懒加载指令img-lazy：
使用vueUse函数库里面的useIntersectionObserver方法监听图片是否进入可视区域，是则给dom元素设置src属性，完成图片的懒加载。

### 封转sku组件
- 在getGoods函数中使用不用商品的id发起请求，后端返回数据的skus字段里面存储了该商品每一种可能选择的规格信息（sku组合），规格信息里面包括：
{
  "id": "300476623",
  "skuCode": "300476623",
  "price": "89.00",
  "oldPrice": "99.00",
  "inventory": 4926, //库存
  "picture": "https://yanxuan-item.nosdn.127.net/25320ac8a79b26b5baff8337010e9670.png",
  "specs": [
    {
      "name": "颜色",
      "valueName": "米白"
    },
    {
      "name": "尺码",
      "valueName": "73/18M"
    }
  ]
}
- 筛选出库存大于0的sku组合，幂集算法得到所有有效sku组合的子集，将所有有效子集及其sku组合的id存入路径字典pathMap中- 在getGoods函数中，发起getGoods请求后得到goods数据，并遍历goods的specs数组字段：
{
  "name": "颜色",
  "id": "1369139574067957762",
  "values": [
    {
      "name": "黑色",
      "picture": "http://yjy-xiaotuxian-dev.oss-cn-beijing.aliyuncs.com/picture/2021-04-05/cd6c46b6-b944-4479-b547-cdee294568a1.png",
      "desc": ""
    },
    {
      "name": "蓝色",
      "picture": "http://yjy-xiaotuxian-dev.oss-cn-beijing.aliyuncs.com/picture/2021-04-05/2d5ba800-1868-48c8-9213-1a5f8965a05b.png",
      "desc": ""
    }
  ]
}
为values中的每一个单个规格都增加disabled属性（依据其name值是否在pathMap中,若不在则disabled为true,否则为false）
- 处理点击规格事件：
    - 如果该规格上面有disbled: true属性，则返回
    - 如果该规格上面selected: true属性，则将selected: true属性改为false；否则将该规格中的selected属性改为true，其他项的selected: false
    - 点击后还要updateDisabledStatus所有规格：拿到当前的选择规格selectedArr后（比如['黑色',undefined,undefined]）,遍历每一个规格item，再遍历每一个规格底下的所有values按钮val，将当前val的name加入selectedArr中，拿去判断是否在pathMap中，如果不在，就给当前val加上disabled: true属性